<odoo>
  <data>
        <record id="efatturazione_send_einvoice_form" model="ir.ui.view">
        <field name="name">efatturazione.send.einvoice.form</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="l10n_it_fatturapa_out.view_invoice_form_fatturapa"/>
        <field name="arch" type="xml">
            
            <xpath expr="//field[@name='fatturapa_attachment_out_id']/../.." position="after">
                <group colspan="4">
                    <field name="e_state" readonly="1"/>
                    <field name="sdi_file_name" readonly="1"/>
                </group>
                <group colspan="4">
                    <field name="history" nolabel="1" readonly="0">
                        <form string="History Change">
                            <group>
                                <field name="date"/>
                                <field name="status_code" groups="base.group_no_one"/>
                                <newline/>
                                <field name="status_desc"/>
                                <newline/>
                                <field name="note"/>
                                <newline/>
                                <field name="xml_content"/>
                                <newline/>
                                <field name="type" groups="base.group_no_one"/>
                            </group>
                        </form>
                        <tree string="History Change" decoration-danger="type == 'error'">
                            <field name="date"/>
                            <field name="status_code"/>
                            <field name="status_desc"/>
                            <field name="note"/>
                            <field name="type" groups="base.group_no_one"/>
                        </tree>
                    </field>
                </group>
                <group>
                    <button name="getStatusEfatturaAdE" string="Update E-Invoice Status" type="object"/>
                </group>
            </xpath>
            
        </field>
    </record>  
      
      
      
      
    <record id="efatturazione_send_einvoice_form_button" model="ir.ui.view">
        <field name="name">efatturazione.send.einvoice.form.button</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form"/>
        <field name="arch" type="xml">
            
            <xpath expr="//header/button[1]" position="before">
                <button name="%(abc_efatturazione.action_invia_efattura)d" type="action" class="btn-primary" string="Send E-invoice" attrs="{'invisible': ['|', ('e_state', 'not in', ('draft', 'error')), ('state', '!=', 'posted')]}"/>
                
            </xpath>

            
            <xpath expr="//sheet/div[@name='button_box']" position="inside">
                
                <button name="view_preview_invoice_file" type="object" class="oe_stat_button" icon="fa-paper-plane"
                    string="Not Sent" attrs="{'invisible': [('e_state', '!=', 'draft')]}" style="color: grey"/>
                
                <button name="view_preview_invoice_file" type="object" class="oe_stat_button" icon="fa-paper-plane"
                    string="Sending" attrs="{'invisible': [('e_state', '!=', 'sending')]}" style="color: grey"/>
                
                <button name="view_preview_invoice_file" type="object" class="oe_stat_button" icon="fa-paper-plane"
                    string="Sent" attrs="{'invisible': [('e_state', '!=', 'sent')]}" style="color: green"/>
                
                <button name="view_preview_invoice_file" type="object" class="oe_stat_button" icon="fa-paper-plane"
                    string="Delivered" attrs="{'invisible': [('e_state', '!=', 'delivered')]}" style="color: green"/>
                
                <button name="view_preview_invoice_file" type="object" class="oe_stat_button" icon="fa-paper-plane"
                    string="Confirmed âœ“" attrs="{'invisible': [('e_state', '!=', 'accepted')]}" style="color: green"/>
                
                <button name="view_preview_invoice_file" type="object" class="oe_stat_button" icon="fa-paper-plane"
                    string="Refused" attrs="{'invisible': [('e_state', '!=', 'rejected')]}" style="color: red"/>
                
                <button name="view_preview_invoice_file" type="object" class="oe_stat_button" icon="fa-paper-plane"
                    string="Error" attrs="{'invisible': [('e_state', '!=', 'error')]}" style="color: red"/>
                
            </xpath>
            
        </field>
    </record>
      
    <record id="efatturazione_send_einvoice_tree" model="ir.ui.view">
        <field name="name">efatturazione.send.einvoice.tree</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_out_invoice_tree"/>
        <field name="arch" type="xml">


            
            <xpath expr="//field[@name='state']" position="after">
                <field name="e_state" widget="badge" decoration-success="e_state == 'sent' or e_state =='delivered' or e_state=='accepted'"
                decoration-danger="e_state == 'error' or e_state == 'rejected'" decoration-info="e_state == 'draft' or e_state == 'sending'"/>
            </xpath>
            
        </field>
    </record>
    
      
    <record id="fatturapa_attachment_in_form_abc" model="ir.ui.view">
        <field name="name">fatturapa.attachment.in.form.abc</field>
        <field name="model">fatturapa.attachment.in</field>
        <field name="inherit_id" ref="l10n_it_fatturapa_in.view_fatturapa_in_attachment_form"/>
        <field name="arch" type="xml">


            
            <xpath expr="//field[@name='xml_supplier_id']" position="after">
                <field name="id_fatturazione_abc"/>
            </xpath>
            
        </field>
    </record>
       
  </data>
</odoo>